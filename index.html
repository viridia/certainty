<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="module-certainty-ArraySubject.html">ArraySubject</a><ul class='methods'><li data-type='method'><a href="module-certainty-ArraySubject.html#contains">contains</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#containsAll">containsAll</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#containsAllIn">containsAllIn</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#containsAllOf">containsAllOf</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#containsAny">containsAny</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#containsAnyIn">containsAnyIn</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#containsAnyOf">containsAnyOf</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#containsExactly">containsExactly</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#containsExactlyIn">containsExactlyIn</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#containsNone">containsNone</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#containsNoneIn">containsNoneIn</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#containsNoneOf">containsNoneOf</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#hasLength">hasLength</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#isEmpty">isEmpty</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#isNotEmpty">isNotEmpty</a></li></ul></li><li><a href="module-certainty-DeferredSubject.html">DeferredSubject</a><ul class='methods'><li data-type='method'><a href="module-certainty-DeferredSubject.html#invoke">invoke</a></li></ul></li><li><a href="module-certainty-FieldValue.html">FieldValue</a><ul class='methods'><li data-type='method'><a href="module-certainty-FieldValue.html#withValue">withValue</a></li></ul></li><li><a href="module-certainty-InOrder.html">InOrder</a><ul class='methods'><li data-type='method'><a href="module-certainty-InOrder.html#inOrder">inOrder</a></li></ul></li><li><a href="module-certainty-ObjectSubject.html">ObjectSubject</a><ul class='methods'><li data-type='method'><a href="module-certainty-ObjectSubject.html#hasField">hasField</a></li><li data-type='method'><a href="module-certainty-ObjectSubject.html#hasOwnField">hasOwnField</a></li><li data-type='method'><a href="module-certainty-ObjectSubject.html#isEmpty">isEmpty</a></li><li data-type='method'><a href="module-certainty-ObjectSubject.html#isNotEmpty">isNotEmpty</a></li></ul></li><li><a href="module-certainty-PromiseSubject.html">PromiseSubject</a><ul class='methods'><li data-type='method'><a href="module-certainty-PromiseSubject.html#eventually">eventually</a></li><li data-type='method'><a href="module-certainty-PromiseSubject.html#fails">fails</a></li><li data-type='method'><a href="module-certainty-PromiseSubject.html#failsWith">failsWith</a></li><li data-type='method'><a href="module-certainty-PromiseSubject.html#succeeds">succeeds</a></li><li data-type='method'><a href="module-certainty-PromiseSubject.html#succeedsWith">succeedsWith</a></li></ul></li><li><a href="module-certainty-Subject.html">Subject</a><ul class='methods'><li data-type='method'><a href="module-certainty-Subject.html#describe">describe</a></li><li data-type='method'><a href="module-certainty-Subject.html#equals">equals</a></li><li data-type='method'><a href="module-certainty-Subject.html#exists">exists</a></li><li data-type='method'><a href="module-certainty-Subject.html#fail">fail</a></li><li data-type='method'><a href="module-certainty-Subject.html#failComparison">failComparison</a></li><li data-type='method'><a href="module-certainty-Subject.html#failEqual">failEqual</a></li><li data-type='method'><a href="module-certainty-Subject.html#failNotEqual">failNotEqual</a></li><li data-type='method'><a href="module-certainty-Subject.html#hasType">hasType</a></li><li data-type='method'><a href="module-certainty-Subject.html#isDeeplyEqualTo">isDeeplyEqualTo</a></li><li data-type='method'><a href="module-certainty-Subject.html#isEqualTo">isEqualTo</a></li><li data-type='method'><a href="module-certainty-Subject.html#isExactly">isExactly</a></li><li data-type='method'><a href="module-certainty-Subject.html#isFalse">isFalse</a></li><li data-type='method'><a href="module-certainty-Subject.html#isFalsey">isFalsey</a></li><li data-type='method'><a href="module-certainty-Subject.html#isGreaterThan">isGreaterThan</a></li><li data-type='method'><a href="module-certainty-Subject.html#isInstanceOf">isInstanceOf</a></li><li data-type='method'><a href="module-certainty-Subject.html#isLessThan">isLessThan</a></li><li data-type='method'><a href="module-certainty-Subject.html#isNotDeeplyEqualTo">isNotDeeplyEqualTo</a></li><li data-type='method'><a href="module-certainty-Subject.html#isNotEqualTo">isNotEqualTo</a></li><li data-type='method'><a href="module-certainty-Subject.html#isNotGreaterThan">isNotGreaterThan</a></li><li data-type='method'><a href="module-certainty-Subject.html#isNotInstanceOf">isNotInstanceOf</a></li><li data-type='method'><a href="module-certainty-Subject.html#isNotLessThan">isNotLessThan</a></li><li data-type='method'><a href="module-certainty-Subject.html#isNotNull">isNotNull</a></li><li data-type='method'><a href="module-certainty-Subject.html#isNotNullOrUndefined">isNotNullOrUndefined</a></li><li data-type='method'><a href="module-certainty-Subject.html#isNotUndefined">isNotUndefined</a></li><li data-type='method'><a href="module-certainty-Subject.html#isNull">isNull</a></li><li data-type='method'><a href="module-certainty-Subject.html#isNullOrUndefined">isNullOrUndefined</a></li><li data-type='method'><a href="module-certainty-Subject.html#isTrue">isTrue</a></li><li data-type='method'><a href="module-certainty-Subject.html#isTruthy">isTruthy</a></li><li data-type='method'><a href="module-certainty-Subject.html#isUndefined">isUndefined</a></li><li data-type='method'><a href="module-certainty-Subject.html#named">named</a></li></ul></li><li><a href="module-certainty-SubjectFactory.html">SubjectFactory</a><ul class='methods'><li data-type='method'><a href="module-certainty-SubjectFactory.html#addType">addType</a></li><li data-type='method'><a href="module-certainty-SubjectFactory.html#newSubject">newSubject</a></li></ul></li><li><a href="ProxyBase.html">ProxyBase</a><ul class='methods'><li data-type='method'><a href="ProxyBase.html#.addMethod">addMethod</a></li><li data-type='method'><a href="ProxyBase.html#.addMethods">addMethods</a></li><li data-type='method'><a href="ProxyBase.html#invoke">invoke</a></li></ul></li><li><a href="ThrowStrategy.html">ThrowStrategy</a><ul class='methods'><li data-type='method'><a href="ThrowStrategy.html#fail">fail</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-certainty.html">certainty</a><ul class='methods'><li data-type='method'><a href="module-certainty.html#~ensure">ensure</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#compare">compare</a></li><li><a href="global.html#format">format</a></li></ul>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1>Certainty</h1><p><a href="https://github.com/viridia/certainty"><img style="position: absolute; top: 0; right: 0; border: 0;"
  src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67"
  alt="Fork me on GitHub"
  data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a></p>
<h2>Introduction</h2><p><strong>Certainty</strong> is a JavaScript assertion framework designed to make your tests and their error
messages more readable and discoverable, while being extensible to new types of objects.</p>
<p>Certainty is largely inspired by <a href="http://google.github.io/truth/">Truth</a>, a Java-based testing
framework.</p>
<p>Certainty provides assertions, and is designed to work in conjunction with popular testing
frameworks such as <a href="https://mochajs.org/">Mocha</a> or mocking frameworks such as
<a href="http://sinonjs.org/">Sinon</a>.</p>
<p>Certainty adopts a fluent style for test propositions, and is extensible in several ways. It
allows different actions to be taken on failure, the default being to throw an exception.</p>
<ul>
<li><a href="https://github.com/viridia/certainty">GitHub</a></li>
<li><a href="https://viridia.github.io/certainty">JSDocs</a></li>
</ul>
<h3>A simple example:</h3><pre class="prettyprint source lang-javascript"><code>import { ensure } from 'certainty';

let width = 10;
ensure(width).named('width').isGreaterThan(100);</code></pre><p>reports:</p>
<pre class="prettyprint source"><code>Error: Expected width to be greater than 100.</code></pre><p>Certaintyâ€™s propositions are intended to read (more or less) like English, and thereby be more
obvious in their intent, as well as report meaningful information about the errors.</p>
<h3>Fluent syntax</h3><p>Each test proposition begins with a function that wraps the test expression and binds to a fluent
context object. This object (called a <a href="module-certainty-Subject.html"><code>Subject</code></a>) provides a wealth
of assertion methods such as <code>.isTrue()</code> and <code>.isEqualTo()</code>:</p>
<pre class="prettyprint source lang-javascript"><code>ensure(someValue).isTrue();       // is exactly equal to the value 'true'.
ensure(someValue).isTruthy();     // is true when coerced to a boolean.
ensure(someValue).isEqualTo(10);  // is equal to 10.</code></pre><p>The wrapper function also associates the Subject with a failure strategy, such as throwing an
exception when an assertion fails. The <code>ensure</code> function uses the exception strategy, while the
<code>expect</code> function merely prints an error on the console and continues the test.</p>
<h3>Named subjects</h3><p>The <code>.named(string)</code> method can be used to assign a descriptive name to a subject, improving the
readability of failure messages. For example:</p>
<pre class="prettyprint source lang-javascript"><code>ensure(10).isGreaterThan(100);                // Prints: 'Expected 10 to be greater than 100.'
ensure(10).named('width').isGreaterThan(100); // Prints: 'Expected width to be greater than 100.'</code></pre><h3>Type-specific Subjects</h3><p>The set of assertion methods available depends on the runtime type of the test expression. For
example, passing an array to <code>ensure()</code> will return an <code>ArraySubject</code>, which has methods for testing
the elements of the array (<code>.contains()</code>, <code>.hasLength()</code>, and so on). Passing a string will return
a <code>StringSubject</code>, passing an ES2015 Map object will return a <code>MapSubject</code> and so on. For example:</p>
<pre class="prettyprint source lang-javascript"><code>ensure(someArray).hasLength(10);      // is an array of length 10.
ensure(someString).startsWith('abc'); // starts with the characters 'abc'.
ensure(someMap).containsKey('abc');   // contains the key 'abc'.</code></pre><p>It is relatively easy to create custom subclasses of <code>Subject</code> that are associated with non-standard
types (examples might be immutable collections or protocol buffers), and provide assertion methods
that are meaningful for those types.</p>
<h2>Assertion methods</h2><h3>Common assertions</h3><p>The following assertions are applicable to all test expressions regardless of type:</p>
<h4>Boolean assertions</h4><pre class="prettyprint source lang-javascript"><code>ensure(someValue).isTrue();
ensure(someValue).isFalse();
ensure(someValue).isTruthy();
ensure(someValue).isFalsey();</code></pre><p>The distinction between <em>true</em> and <em>truthy</em> is as follows: A <em>truthy</em> value is one that yields
<code>true</code> when coerced to a boolean, e.g.:</p>
<pre class="prettyprint source lang-javascript"><code>if (someValue) { /* value is truthy. */ } else { /* value is falsey. */ }</code></pre><p>Whereas <code>isTrue()</code> only succeeds if the value is exactly equal to the literal value <code>true</code>.</p>
<h4>Tests for <code>null</code> and <code>undefined</code></h4><pre class="prettyprint source lang-javascript"><code>ensure(someValue).isNull();
ensure(someValue).isNotNull();
ensure(someValue).isUndefined();
ensure(someValue).isNotUndefined();
ensure(someValue).isNullOrUndefined();
ensure(someValue).isNotNullOrUndefined();
ensure(someValue).exists();               // Synonym for isNotNullOrUndefined()</code></pre><h4>Equality tests</h4><pre class="prettyprint source lang-javascript"><code>ensure(someValue).isEqualTo(otherValue);
ensure(someValue).equals(otherValue);     // Synonym for isEqualTo()
ensure(someValue).isNotEqualTo(otherValue);
ensure(someValue).isExactly(otherValue);  // Uses === instead of ==
ensure(someValue).isDeeplyEqualTo(otherValue);
ensure(someValue).isNotDeeplyEqualTo(otherValue);</code></pre><p>For deep comparison failures, rather than printing the entire value (which may be large), the
comparator will attempt to summarize the difference between the two values. So for example, a
deep comparison of <code>{ a:1, b:1 }</code> with <code>{ a:1 }</code> will report the fact that it expected a <code>b</code>
property to exist but it did not find one.</p>
<h4>Relational tests</h4><pre class="prettyprint source lang-javascript"><code>ensure(someValue).isGreaterThan(otherValue);
ensure(someValue).isNotGreaterThan(otherValue);
ensure(someValue).isLessThan(otherValue);
ensure(someValue).isNotLessThan(otherValue);</code></pre><h4>Type tests</h4><pre class="prettyprint source lang-javascript"><code>ensure(someValue).isInstanceOf(class);
ensure(someValue).isNotInstanceOf(class);
ensure(someValue).hasType(type);</code></pre><h3>Array assertions</h3><p>The following assertions are applicable to array expressions:</p>
<h4>Array length assertions</h4><pre class="prettyprint source lang-javascript"><code>ensure(someArray).isEmpty();
ensure(someArray).isNotEmpty();
ensure(someArray).hasLength(length);</code></pre><h4>Array membership assertions</h4><pre class="prettyprint source lang-javascript"><code>// Accepts a single element value
ensure(someArray).contains(element);

// Accepts multiple arguments
ensure(someArray).containsAllOf(elements...);
ensure(someArray).containsExactly(elements...);
ensure(someArray).containsAnyOf(elements...);
ensure(someArray).containsNoneOf(elements...);

// Accepts a list of elements
ensure(someArray).containsAllIn(elementList);
ensure(someArray).containsExactlyIn(elementList);
ensure(someArray).containsAnyIn(elementList);
ensure(someArray).containsNoneIn(elementList);

// Accepts a verb phrase (such as 'be prime') and a test function.
ensure(someArray).containsAny(verb, testFn);
ensure(someArray).containsAll(verb, testFn);
ensure(someArray).containsNone(verb, testFn);</code></pre><h3>Object assertions</h3><p>The following assertions are applicable to object expressions:</p>
<pre class="prettyprint source lang-javascript"><code>ensure(someObject).isEmpty();
ensure(someObject).isNotEmpty();
ensure(someObject).hasField(key).withValue(expectedValue);
ensure(someObject).hasOwnField(key).withValue(expectedValue);</code></pre><h3>String assertions</h3><h3>ES2015 collection assertions</h3><p>Certainty will detect if the ES2015 <code>Map</code> and <code>Set</code> classes are present, and if so, it will add
support for these collection types.</p>
<h3>Promise assertions</h3><p>Certainty supports assertions on JavaScript Promises if they are available in the environment.
Note that if you are transpiling your application with Babel in order to get Promise support,
you'll need to transpile Certainty as well.</p>
<p>The <code>PromiseSubject.eventually()</code> method returns a subject that supports the standard assertions
methods, but waits until the promise has resolved before executing those assertions. The set
of assertion methods available depends on the type of object returned by the promise, so for example
if the promise resolves to an Array, you can call <code>.contains()</code> on it.</p>
<p>Examples:</p>
<pre class="prettyprint source lang-javascript"><code>ensure(somePromise).eventually().isTrue();
ensure(somePromise).eventually().named('x').equals(someValue);
ensure(somePromise).eventually().contains(someItem);</code></pre><p>Note that putting the <code>.named()</code> call after <code>.eventually()</code> causes the name to be assigned to
the resolved value instead of the promise object.</p>
<p>If you just want to know if the promise succeeded or failed, you can simply call <code>.succeeds()</code> or
<code>.fails()</code>:</p>
<pre class="prettyprint source lang-javascript"><code>ensure(somePromise).succeeds();
ensure(somePromise).fails();

// Does simply equality comparison.
ensure(somePromise).succeedsWith(someValue);
ensure(somePromise).failsWith(someReason);</code></pre><p>Note that the return value of the assertion methods are 'thenable', so if you are testing using
Mocha, you can return the result of the assertion from your test method, which will cause Mocha
to wait until your promise is resolved.</p>
<pre class="prettyprint source lang-javascript"><code>describe('MyTest', function() {
  it('should resolve to 7', function() {
    var promise = methodThatCreatesAPromise();
    return ensure(promise).eventually().equals(7);
  });
});</code></pre><h2>Extending Certainty</h2><p>It's relatively easy to add support for additional test expression types. The global singleton
<code>subjectFactory</code> creates subjects based on the type of the test expression. To add support for
a new type, you'll need to tell the subjectFactory about your type:</p>
<pre class="prettyprint source lang-javascript"><code>import { subjectFactory } from 'certainty';

subjectFactory.addType(function(value) { return value instanceof MyType; }, MyTypeSubject);</code></pre><p>The argument to <code>addType()</code> is a factory function which is passed the test expression. If the
factory function recognizes the type, it should return a subclass of <code>Subject</code>, otherwise it should
return <code>null</code>.</p>
<p>If you plan to make your custom <code>Subject</code> class work with promises, there's a little bit of extra
work to be done. See the source for <code>ArraySubject</code> for an example.</p></article>
    </section>






</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Sun May 22 2016 13:09:21 GMT-0700 (PDT) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>