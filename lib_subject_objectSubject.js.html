<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>lib/subject/objectSubject.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="LogStrategy.html">LogStrategy</a><ul class='methods'><li data-type='method'><a href="LogStrategy.html#assertNoErrors">assertNoErrors</a></li><li data-type='method'><a href="LogStrategy.html#fail">fail</a></li></ul></li><li><a href="module-certainty-ArraySubject.html">ArraySubject</a><ul class='methods'><li data-type='method'><a href="module-certainty-ArraySubject.html#contains">contains</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#containsAll">containsAll</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#containsAllIn">containsAllIn</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#containsAllOf">containsAllOf</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#containsAny">containsAny</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#containsAnyIn">containsAnyIn</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#containsAnyOf">containsAnyOf</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#containsExactly">containsExactly</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#containsExactlyIn">containsExactlyIn</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#containsNone">containsNone</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#containsNoneIn">containsNoneIn</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#containsNoneOf">containsNoneOf</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#doesNotContain">doesNotContain</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#eachElement">eachElement</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#hasLength">hasLength</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#isEmpty">isEmpty</a></li><li data-type='method'><a href="module-certainty-ArraySubject.html#isNotEmpty">isNotEmpty</a></li></ul></li><li><a href="module-certainty-DeferredSubject.html">DeferredSubject</a><ul class='methods'><li data-type='method'><a href="module-certainty-DeferredSubject.html#invoke">invoke</a></li><li data-type='method'><a href="module-certainty-DeferredSubject.html#run">run</a></li></ul></li><li><a href="module-certainty-EachSubject.html">EachSubject</a><ul class='methods'><li data-type='method'><a href="module-certainty-EachSubject.html#invoke">invoke</a></li></ul></li><li><a href="module-certainty-EventualSubject.html">EventualSubject</a></li><li><a href="module-certainty-FieldValue.html">FieldValue</a><ul class='methods'><li data-type='method'><a href="module-certainty-FieldValue.html#withValue">withValue</a></li></ul></li><li><a href="module-certainty-InOrder.html">InOrder</a><ul class='methods'><li data-type='method'><a href="module-certainty-InOrder.html#inOrder">inOrder</a></li></ul></li><li><a href="module-certainty-KeyValue.html">KeyValue</a><ul class='methods'><li data-type='method'><a href="module-certainty-KeyValue.html#withValue">withValue</a></li></ul></li><li><a href="module-certainty-MapSubject.html">MapSubject</a><ul class='methods'><li data-type='method'><a href="module-certainty-MapSubject.html#containsEntry">containsEntry</a></li><li data-type='method'><a href="module-certainty-MapSubject.html#containsKey">containsKey</a></li><li data-type='method'><a href="module-certainty-MapSubject.html#doesNotContainKey">doesNotContainKey</a></li><li data-type='method'><a href="module-certainty-MapSubject.html#hasSize">hasSize</a></li><li data-type='method'><a href="module-certainty-MapSubject.html#isEmpty">isEmpty</a></li><li data-type='method'><a href="module-certainty-MapSubject.html#isNotEmpty">isNotEmpty</a></li></ul></li><li><a href="module-certainty-ObjectSubject.html">ObjectSubject</a><ul class='methods'><li data-type='method'><a href="module-certainty-ObjectSubject.html#doesNotHaveField">doesNotHaveField</a></li><li data-type='method'><a href="module-certainty-ObjectSubject.html#doesNotHaveOwnField">doesNotHaveOwnField</a></li><li data-type='method'><a href="module-certainty-ObjectSubject.html#hasField">hasField</a></li><li data-type='method'><a href="module-certainty-ObjectSubject.html#hasOwnField">hasOwnField</a></li><li data-type='method'><a href="module-certainty-ObjectSubject.html#isEmpty">isEmpty</a></li><li data-type='method'><a href="module-certainty-ObjectSubject.html#isNotEmpty">isNotEmpty</a></li></ul></li><li><a href="module-certainty-PromiseSubject.html">PromiseSubject</a><ul class='methods'><li data-type='method'><a href="module-certainty-PromiseSubject.html#eventually">eventually</a></li><li data-type='method'><a href="module-certainty-PromiseSubject.html#fails">fails</a></li><li data-type='method'><a href="module-certainty-PromiseSubject.html#failsWith">failsWith</a></li><li data-type='method'><a href="module-certainty-PromiseSubject.html#succeeds">succeeds</a></li><li data-type='method'><a href="module-certainty-PromiseSubject.html#succeedsWith">succeedsWith</a></li></ul></li><li><a href="module-certainty-Registry.html">Registry</a><ul class='methods'><li data-type='method'><a href="module-certainty-Registry.html#addType">addType</a></li><li data-type='method'><a href="module-certainty-Registry.html#getFormatter">getFormatter</a></li></ul></li><li><a href="module-certainty-SetSubject.html">SetSubject</a><ul class='methods'><li data-type='method'><a href="module-certainty-SetSubject.html#contains">contains</a></li><li data-type='method'><a href="module-certainty-SetSubject.html#containsAll">containsAll</a></li><li data-type='method'><a href="module-certainty-SetSubject.html#containsAllIn">containsAllIn</a></li><li data-type='method'><a href="module-certainty-SetSubject.html#containsAllOf">containsAllOf</a></li><li data-type='method'><a href="module-certainty-SetSubject.html#containsAny">containsAny</a></li><li data-type='method'><a href="module-certainty-SetSubject.html#containsAnyIn">containsAnyIn</a></li><li data-type='method'><a href="module-certainty-SetSubject.html#containsAnyOf">containsAnyOf</a></li><li data-type='method'><a href="module-certainty-SetSubject.html#containsExactly">containsExactly</a></li><li data-type='method'><a href="module-certainty-SetSubject.html#containsExactlyIn">containsExactlyIn</a></li><li data-type='method'><a href="module-certainty-SetSubject.html#containsNone">containsNone</a></li><li data-type='method'><a href="module-certainty-SetSubject.html#containsNoneIn">containsNoneIn</a></li><li data-type='method'><a href="module-certainty-SetSubject.html#containsNoneOf">containsNoneOf</a></li><li data-type='method'><a href="module-certainty-SetSubject.html#doesNotContain">doesNotContain</a></li><li data-type='method'><a href="module-certainty-SetSubject.html#eachMember">eachMember</a></li><li data-type='method'><a href="module-certainty-SetSubject.html#hasSize">hasSize</a></li><li data-type='method'><a href="module-certainty-SetSubject.html#isEmpty">isEmpty</a></li><li data-type='method'><a href="module-certainty-SetSubject.html#isNotEmpty">isNotEmpty</a></li></ul></li><li><a href="module-certainty-StringSubject.html">StringSubject</a><ul class='methods'><li data-type='method'><a href="module-certainty-StringSubject.html#doesNotInclude">doesNotInclude</a></li><li data-type='method'><a href="module-certainty-StringSubject.html#endsWith">endsWith</a></li><li data-type='method'><a href="module-certainty-StringSubject.html#includes">includes</a></li><li data-type='method'><a href="module-certainty-StringSubject.html#isEmpty">isEmpty</a></li><li data-type='method'><a href="module-certainty-StringSubject.html#isNotEmpty">isNotEmpty</a></li><li data-type='method'><a href="module-certainty-StringSubject.html#matches">matches</a></li><li data-type='method'><a href="module-certainty-StringSubject.html#startsWith">startsWith</a></li></ul></li><li><a href="module-certainty-Subject.html">Subject</a><ul class='methods'><li data-type='method'><a href="module-certainty-Subject.html#describe">describe</a></li><li data-type='method'><a href="module-certainty-Subject.html#equals">equals</a></li><li data-type='method'><a href="module-certainty-Subject.html#exists">exists</a></li><li data-type='method'><a href="module-certainty-Subject.html#fail">fail</a></li><li data-type='method'><a href="module-certainty-Subject.html#failComparison">failComparison</a></li><li data-type='method'><a href="module-certainty-Subject.html#failEqual">failEqual</a></li><li data-type='method'><a href="module-certainty-Subject.html#failNotEqual">failNotEqual</a></li><li data-type='method'><a href="module-certainty-Subject.html#hasType">hasType</a></li><li data-type='method'><a href="module-certainty-Subject.html#isDeeplyEqualTo">isDeeplyEqualTo</a></li><li data-type='method'><a href="module-certainty-Subject.html#isEqualTo">isEqualTo</a></li><li data-type='method'><a href="module-certainty-Subject.html#isExactly">isExactly</a></li><li data-type='method'><a href="module-certainty-Subject.html#isFalse">isFalse</a></li><li data-type='method'><a href="module-certainty-Subject.html#isFalsey">isFalsey</a></li><li data-type='method'><a href="module-certainty-Subject.html#isGreaterThan">isGreaterThan</a></li><li data-type='method'><a href="module-certainty-Subject.html#isIn">isIn</a></li><li data-type='method'><a href="module-certainty-Subject.html#isInstanceOf">isInstanceOf</a></li><li data-type='method'><a href="module-certainty-Subject.html#isLessThan">isLessThan</a></li><li data-type='method'><a href="module-certainty-Subject.html#isNotDeeplyEqualTo">isNotDeeplyEqualTo</a></li><li data-type='method'><a href="module-certainty-Subject.html#isNotEqualTo">isNotEqualTo</a></li><li data-type='method'><a href="module-certainty-Subject.html#isNotGreaterThan">isNotGreaterThan</a></li><li data-type='method'><a href="module-certainty-Subject.html#isNotInstanceOf">isNotInstanceOf</a></li><li data-type='method'><a href="module-certainty-Subject.html#isNotLessThan">isNotLessThan</a></li><li data-type='method'><a href="module-certainty-Subject.html#isNotNull">isNotNull</a></li><li data-type='method'><a href="module-certainty-Subject.html#isNotNullOrUndefined">isNotNullOrUndefined</a></li><li data-type='method'><a href="module-certainty-Subject.html#isNotUndefined">isNotUndefined</a></li><li data-type='method'><a href="module-certainty-Subject.html#isNull">isNull</a></li><li data-type='method'><a href="module-certainty-Subject.html#isNullOrUndefined">isNullOrUndefined</a></li><li data-type='method'><a href="module-certainty-Subject.html#isTrue">isTrue</a></li><li data-type='method'><a href="module-certainty-Subject.html#isTruthy">isTruthy</a></li><li data-type='method'><a href="module-certainty-Subject.html#isUndefined">isUndefined</a></li><li data-type='method'><a href="module-certainty-Subject.html#named">named</a></li><li data-type='method'><a href="module-certainty-Subject.html#withFailureMessage">withFailureMessage</a></li></ul></li><li><a href="module-certainty-SubjectFactory.html">SubjectFactory</a><ul class='methods'><li data-type='method'><a href="module-certainty-SubjectFactory.html#addType">addType</a></li><li data-type='method'><a href="module-certainty-SubjectFactory.html#newSubject">newSubject</a></li></ul></li><li><a href="ProxyBase.html">ProxyBase</a><ul class='methods'><li data-type='method'><a href="ProxyBase.html#.addMethod">addMethod</a></li><li data-type='method'><a href="ProxyBase.html#.addMethods">addMethods</a></li><li data-type='method'><a href="ProxyBase.html#invoke">invoke</a></li></ul></li><li><a href="ThrowStrategy.html">ThrowStrategy</a><ul class='methods'><li data-type='method'><a href="ThrowStrategy.html#fail">fail</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-certainty.html">certainty</a><ul class='methods'><li data-type='method'><a href="module-certainty.html#~ensure">ensure</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#compare">compare</a></li><li><a href="global.html#format">format</a></li><li><a href="global.html#formatArray">formatArray</a></li><li><a href="global.html#formatMap">formatMap</a></li><li><a href="global.html#formatObject">formatObject</a></li><li><a href="global.html#formatPromise">formatPromise</a></li><li><a href="global.html#formatSet">formatSet</a></li><li><a href="global.html#formatString">formatString</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">lib/subject/objectSubject.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @module certainty */
var Subject = require('./subject');
var ProxyBase = require('./proxy');

function isEmpty(obj) {
  /* eslint no-unused-vars: ["off"] */
  for (var x in obj) { return false; }
  return true;
}

/** A fluent context object containing the value of the field that was just tested. Used for
    additional assertions about a field.
    @constructor
  */
function FieldValue(subject, name, value) {
  this.subject = subject;
  this.name = name;
  this.value = subject.value[name];
  this.format = subject.format;
}

/** Ensure that the field has the expected value.
    @param {*} value The expected value of the field.
*/
FieldValue.prototype.withValue = function (expected) {
  if (this.value != expected) {
    this.subject.fail('Expected ' + this.subject.describe() + ' to have a field \'' + this.name +
      '\' with value ' + this.format(expected) + ', actual value was ' +
      this.format(this.value) + '.');
  }
  return this;
}
ProxyBase.addMethods(FieldValue);

// Used when the key is missing, so that .withValue() doesn't produce a second error message.
function MissingKeyValue() {}
MissingKeyValue.prototype.withValue = function (expected) {
  return this;
}

/** Subclass of Subject which provides assertions methods for object types.
    @param {FailureStrategy} failureStrategy The failure strategy to use when an assertion fails.
    @param {object} value The value being checked.
    @constructor
    @extends Subject
*/
function ObjectSubject(failureStrategy, value) {
  Subject.call(this, failureStrategy, value);
}
ObjectSubject.prototype = Object.create(Subject.prototype);
ObjectSubject.prototype.constructor = ObjectSubject;

/** Ensure that the object being tested is empty. This only checks for fields on the object, not
    its prototype.
    @return {ObjectSubject} `this` for chaining.
*/
ObjectSubject.prototype.isEmpty = function () {
  if (!isEmpty(this.value)) {
    this.fail('Expected ' + this.describe() + ' to be empty.');
  }
  return this;
};

/** Ensure that the object being tested is non-empty. This only checks for fields on the object,
    not its prototype.
    @return {ObjectSubject} `this` for chaining.
*/
ObjectSubject.prototype.isNotEmpty = function () {
  if (isEmpty(this.value)) {
    this.fail('Expected ' + this.describe() + ' to be non-empty.');
  }
  return this;
};

/** Ensure that the object being tested has a property (either its own or inherited) with the
    specified field name.
    @param {string} fieldName The name of the property.
    @return {FieldValue} FieldValue for additional assertions on the field value.
*/
ObjectSubject.prototype.hasField = function (fieldName) {
  if (!(fieldName in this.value)) {
    this.fail('Expected ' + this.describe() + ' to have a field named \'' +
      fieldName + '\'.');
    return new MissingKeyValue();
  }
  return new FieldValue(this, fieldName);
};

/** Ensure that the object being tested dows not have a property (either its own or inherited)
    with the specified field name.
    @param {string} fieldName The name of the property.
    @return {ObjectSubject} `this` for chaining.
*/
ObjectSubject.prototype.doesNotHaveField = function (fieldName) {
  if (fieldName in this.value) {
    this.fail('Expected ' + this.describe() + ' to not have a field named \'' +
      fieldName + '\'.');
  }
  return this;
};

/** Ensure that the object has a property with the given field name. The property must be one
    of the object's own properties, not one inherited from a prototype.
    @param {string} fieldName The name of the property.
    @return {FieldValue} FieldValue for additional assertions on the field value.
*/
ObjectSubject.prototype.hasOwnField = function (fieldName) {
  if (!Object.prototype.hasOwnProperty.call(this.value, fieldName)) {
    this.fail('Expected ' + this.describe() + ' to have own field named \'' +
      fieldName + '\'.');
  }
  return new FieldValue(this, fieldName);
};

/** Ensure that the object does not have it's own property with the given field name.
    @param {string} fieldName The name of the property.
    @return {ObjectSubject} `this` for chaining.
*/
ObjectSubject.prototype.doesNotHaveOwnField = function (fieldName) {
  if (Object.prototype.hasOwnProperty.call(this.value, fieldName)) {
    this.fail('Expected ' + this.describe() + ' to not have own field named \'' +
      fieldName + '\'.');
  }
  return this;
};

module.exports = ObjectSubject;
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Fri Jun 02 2017 20:24:03 GMT-0700 (PDT) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
